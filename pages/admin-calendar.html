<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Management | Admin | Nicoline Thijssen</title>
    <meta name="description" content="Admin interface for managing calendar availability and appointments">
    <link rel="stylesheet" href="../assets/css/styles-new.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Cardo:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar admin-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <h1>Admin Dashboard</h1>
                <p>Calendar Management</p>
            </div>
            <div class="nav-menu" id="nav-menu">
                <a href="admin-dashboard.html" class="nav-link">Dashboard</a>
                <a href="admin-calendar.html" class="nav-link active">Calendar</a>
                <a href="admin-bookings.html" class="nav-link">Bookings</a>
                <a href="admin-clients.html" class="nav-link">Clients</a>
                <a href="index.html" class="nav-link">View Site</a>
                <a href="#" class="nav-link logout-btn" id="logout-btn">Logout</a>
            </div>
            <div class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Admin Header -->
    <section class="admin-header">
        <div class="container">
            <div class="header-content">
                <h1>Calendar Management</h1>
                <p>Manage your availability and sync with external calendars</p>
            </div>
            <div class="header-actions">
                <button type="button" class="btn btn-secondary" id="sync-calendar">
                    üîÑ Sync Calendar
                </button>
                <button type="button" class="btn btn-primary" id="set-availability">
                    ‚è∞ Set Availability
                </button>
            </div>
        </div>
    </section>

    <!-- Calendar Integration Status -->
    <section class="calendar-status">
        <div class="container">
            <div class="status-cards">
                <div class="status-card" id="google-status">
                    <div class="status-icon">üìÖ</div>
                    <h3>Google Calendar</h3>
                    <p class="status-text" id="google-status-text">Not Connected</p>
                    <button type="button" class="btn btn-outline" id="connect-google">Connect Google</button>
                </div>
                <div class="status-card" id="outlook-status">
                    <div class="status-icon">üìÜ</div>
                    <h3>Outlook Calendar</h3>
                    <p class="status-text" id="outlook-status-text">Not Connected</p>
                    <button type="button" class="btn btn-outline" id="connect-outlook">Connect Outlook</button>
                </div>
                <div class="status-card sync-status">
                    <div class="status-icon">üîÑ</div>
                    <h3>Last Sync</h3>
                    <p class="status-text" id="last-sync-text">Never</p>
                    <button type="button" class="btn btn-secondary" id="force-sync">Sync Now</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Availability Management -->
    <section class="availability-management">
        <div class="container">
            <div class="management-grid">
                <!-- Weekly Schedule -->
                <div class="schedule-section">
                    <h2>Weekly Schedule</h2>
                    <div class="weekly-schedule" id="weekly-schedule">
                        <!-- Days will be generated by JavaScript -->
                    </div>
                    <div class="schedule-actions">
                        <button type="button" class="btn btn-primary" id="save-schedule">Save Changes</button>
                        <button type="button" class="btn btn-secondary" id="reset-schedule">Reset to Default</button>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <h3>Quick Actions</h3>
                    <div class="action-cards">
                        <div class="action-card">
                            <h4>Block Time</h4>
                            <p>Temporarily block specific time slots</p>
                            <button type="button" class="btn btn-outline" id="block-time">Block Time</button>
                        </div>
                        <div class="action-card">
                            <h4>Vacation Mode</h4>
                            <p>Block all appointments for a date range</p>
                            <button type="button" class="btn btn-outline" id="vacation-mode">Set Vacation</button>
                        </div>
                        <div class="action-card">
                            <h4>Emergency Block</h4>
                            <p>Immediately block today's remaining slots</p>
                            <button type="button" class="btn btn-warning" id="emergency-block">Emergency Block</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Calendar Sync Settings -->
    <section class="sync-settings">
        <div class="container">
            <h2>Synchronization Settings</h2>
            <div class="settings-grid">
                <div class="setting-group">
                    <h4>Sync Preferences</h4>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="auto-sync" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="setting-info">
                            <strong>Automatic Sync</strong>
                            <p>Sync calendar changes every 15 minutes</p>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="two-way-sync" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="setting-info">
                            <strong>Two-Way Sync</strong>
                            <p>Sync changes both to and from external calendars</p>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="conflict-detection" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="setting-info">
                            <strong>Conflict Detection</strong>
                            <p>Alert when external events conflict with bookings</p>
                        </div>
                    </div>
                </div>

                <div class="setting-group">
                    <h4>Buffer Settings</h4>
                    <div class="setting-item">
                        <label for="buffer-before">Buffer Before Sessions</label>
                        <select id="buffer-before">
                            <option value="0">No Buffer</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="buffer-after">Buffer After Sessions</label>
                        <select id="buffer-after">
                            <option value="0">No Buffer</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 hour</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="max-daily-sessions">Max Daily Sessions</label>
                        <input type="number" id="max-daily-sessions" value="4" min="1" max="10">
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recent Activity -->
    <section class="recent-activity">
        <div class="container">
            <h2>Recent Calendar Activity</h2>
            <div class="activity-list" id="activity-list">
                <!-- Activity items will be populated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Block Time Modal -->
    <div class="modal" id="block-time-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Block Time Slots</h3>
                <button type="button" class="modal-close" id="close-block-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="block-time-form">
                    <div class="form-group">
                        <label for="block-date">Date</label>
                        <input type="date" id="block-date" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="block-start-time">Start Time</label>
                            <input type="time" id="block-start-time" required>
                        </div>
                        <div class="form-group">
                            <label for="block-end-time">End Time</label>
                            <input type="time" id="block-end-time" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="block-reason">Reason</label>
                        <textarea id="block-reason" rows="3" placeholder="Optional reason for blocking this time..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="recurring-block">
                            <span class="checkmark"></span>
                            Recurring weekly block
                        </label>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-block">Cancel</button>
                        <button type="submit" class="btn btn-primary">Block Time</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Vacation Mode Modal -->
    <div class="modal" id="vacation-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Set Vacation/Unavailable Period</h3>
                <button type="button" class="modal-close" id="close-vacation-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="vacation-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vacation-start">Start Date</label>
                            <input type="date" id="vacation-start" required>
                        </div>
                        <div class="form-group">
                            <label for="vacation-end">End Date</label>
                            <input type="date" id="vacation-end" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="vacation-title">Title</label>
                        <input type="text" id="vacation-title" placeholder="e.g., Summer Vacation, Conference" required>
                    </div>
                    <div class="form-group">
                        <label for="vacation-message">Auto-Reply Message</label>
                        <textarea id="vacation-message" rows="3" placeholder="Message to show when clients try to book during this period..."></textarea>
                    </div>
                    <div class="form-group">
                        <label class="checkbox-container">
                            <input type="checkbox" id="cancel-existing">
                            <span class="checkmark"></span>
                            Cancel existing appointments in this period
                        </label>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-vacation">Cancel</button>
                        <button type="submit" class="btn btn-primary">Set Vacation Period</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="admin-footer">
        <div class="container">
            <p>&copy; 2024 Nicoline Thijssen Admin Dashboard. All rights reserved.</p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script src="calendar-integration.js"></script>
    <script src="admin-calendar.js"></script>
</body>
</html>